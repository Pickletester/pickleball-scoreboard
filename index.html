<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pickleball Scoreboard - Final Build</title>
  <style>
    body { margin: 0; background: black; color: white; font-family: 'Segoe UI', Arial, sans-serif; overflow: hidden; }
    
    .container { 
      position: relative; 
      width: 832px; 
      height: 384px; 
      display: flex; 
      border: 2px solid #444; 
      box-sizing: border-box;
    }

    /* Left and Right Player Sections */
    .player-area { width: 245px; display: flex; flex-direction: column; }
    .player-box { 
      height: 192px; 
      border: 1px solid white; 
      background: #1a365d; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
    }

    /* Score Columns */
    .score-area { 
      width: 110px; 
      border: 1px solid white; 
      background: #808080; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center; 
    }

    /* Right Information Panel (Large Fonts) */
    .info-panel { 
      flex-grow: 1; 
      padding: 20px 10px; 
      text-align: center; 
      display: flex;
      flex-direction: column;
      justify-content: space-between; 
      height: 100%;
      box-sizing: border-box;
      background: black;
    }

    /* Input Styling */
    input { background: none; border: none; color: white; font-weight: bold; text-align: center; width: 100%; outline: none; }
    
    .input-p { font-size: 32px; } /* Player Names */
    .input-s { font-size: 140px; line-height: 1; } /* Main Scores */
    
    .info-label { font-size: 22px; color: #aaaaaa; letter-spacing: 2px; text-transform: uppercase; }
    .input-info { font-size: 34px; color: #ffffff; margin-top: -5px; } /* Event/Games Values */

    /* Controls */
    .controls button { 
      background: rgba(255,255,255,0.2); 
      color: white; 
      border: 1px solid white; 
      cursor: pointer; 
      padding: 5px 15px; 
      font-size: 18px;
    }

    #clock { font-size: 32px; color: #00ffcc; font-weight: bold; }

    .swap-btn-large {
      padding: 12px;
      font-size: 20px;
      font-weight: bold;
      background: #444;
      border: 2px solid white;
      color: white;
      cursor: pointer;
      width: 90%;
      margin: 0 auto;
      text-transform: uppercase;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="player-area">
    <div class="player-box"><input id="p4" class="input-p" value="PLAYER 4"></div>
    <div class="player-box"><input id="p3" class="input-p" value="PLAYER 3"></div>
  </div>

  <div class="score-area">
    <input id="score1" class="input-s" value="0">
    <div class="controls">
      <button onclick="adjust('score1', 1)">▲</button>
      <button onclick="adjust('score1', -1)">▼</button>
    </div>
  </div>

  <div class="score-area">
    <input id="score2" class="input-s" value="0">
    <div class="controls">
      <button onclick="adjust('score2', 1)">▲</button>
      <button onclick="adjust('score2', -1)">▼</button>
    </div>
  </div>

  <div class="player-area">
    <div class="player-box"><input id="p1" class="input-p" value="PLAYER 1"></div>
    <div class="player-box"><input id="p2" class="input-p" value="PLAYER 2"></div>
  </div>

  <div class="info-panel">
    <div>
      <div class="info-label">EVENT NAME</div>
      <input id="event" class="input-info" value="TOURNAMENT">
    </div>

    <div>
      <div class="info-label">GAMES</div>
      <input id="games" class="input-info" value="0-0, 0-0">
    </div>

    <div id="clock">00:00:00 PM</div>

    <button class="swap-btn-large" onclick="swap()">SWAP SIDES</button>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

  // Using your specific Project Configuration
  const firebaseConfig = {
    databaseURL: "https://pickleballscoreboard-a963e-default-rtdb.firebaseio.com",
    projectId: "pickleballscoreboard-a963e",
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const dbRef = ref(db, 'scoreboard');

  // Listen for updates from Firebase (Auto-Update Logic)
  onValue(dbRef, (snapshot) => {
    const data = snapshot.val();
    if (data) {
      Object.keys(data).forEach(id => {
        const el = document.getElementById(id);
        if (el && el.value !== String(data[id])) {
          el.value = data[id];
        }
      });
    }
  });

  // Function to send data to Firebase whenever an input changes
  function sync() {
    const data = {};
    document.querySelectorAll('input').forEach(el => data[el.id] = el.value);
    set(dbRef, data);
  }

  // Attach sync to every input field
  document.querySelectorAll('input').forEach(el => el.oninput = sync);

  // Button Action: Adjust Score
  window.adjust = (id, amt) => {
    const el = document.getElementById(id);
    el.value = Math.max(0, parseInt(el.value || 0) + amt);
    sync();
  };

  // Button Action: Swap Sides
  window.swap = () => {
    const p1 = document.getElementById('p1').value, p2 = document.getElementById('p2').value;
    const p3 = document.getElementById('p3').value, p4 = document.getElementById('p4').value;
    const s1 = document.getElementById('score1').value, s2 = document.getElementById('score2').value;
    
    document.getElementById('p1').value = p4; document.getElementById('p4').value = p1;
    document.getElementById('p2').value = p3; document.getElementById('p3').value = p2;
    document.getElementById('score1').value = s2; document.getElementById('score2').value = s1;
    sync();
  };

  // Live Clock
  setInterval(() => {
    document.getElementById('clock').innerText = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
  }, 1000);
</script>
</body>
</html>
